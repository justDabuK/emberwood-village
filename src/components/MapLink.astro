---
import { fade } from "astro:transitions";

type Props = {
    url: string;
    frontmatter: {
        title: string;
        columnStart: number;
        columnEnd: number;
        rowStart: number;
        rowEnd: number;
        disabled?: boolean;
        icon?: string;
        iconSize?: string;
    }
}

const { url, frontmatter } = Astro.props;
const { title, columnStart, columnEnd, rowStart, rowEnd, disabled, icon } = frontmatter;
const iconSize = frontmatter.iconSize || "2rem";
---

{disabled ?
<div class="disabledDiv" >{title}</div> :
<a class="mapLink" href={url}>{icon ? <img style={`view-transition-name: ${icon}`} src={`/icons/${icon}.png`} alt={icon} /> :title}</a>}

<!-- TODO: add icons to all shops -->

<style define:vars={{columnStart, columnEnd, rowStart, rowEnd, iconSize}}>
    .mapLink {
        grid-column: var(--columnStart) / var(--columnEnd);
        grid-row: var(--rowStart) / var(--rowEnd);
        background-color: oklch(76.99% 0.08 226.91 / 0.5);
        color: oklch(44.81% 0.0859 226.91);
        display: grid;
        place-items: center;
        font-size: 0.5rem;
        border-radius: 5px;
    }

    .mapLink:hover {
        background-color: oklch(76.99% 0.08 226.91 / 0.8);
    }

    .disabledDiv {
        grid-column: var(--columnStart) / var(--columnEnd);
        grid-row: var(--rowStart) / var(--rowEnd);
        background-color: oklch(61.72% 0.0307 226.91 / 30%);
        color: oklch(85% 0.0379 304.82);
        display: grid;
        place-items: center;
        font-size: 0.5rem;
        border-radius: 5px;
    }

    img {
        height: var(--iconSize);
    }
</style>